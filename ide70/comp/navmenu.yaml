---
unitInterface:
  descr: Navigation menu
  properties:
    structure:
      descr: Structure of menu
      mapHead: yes
      children:
        name:
          descr: Menu item title
          listHead: yes
          reference: menuHeader
          children:
            submenu:
              descr: Submenu entry
              mapHead: yes
              childrenRef: menuHeader
            loadUnit:
              descr: Name of unit to load
              valueCompleter: fileNameCompleter
              valueCompleterParams:
                folderPrefix: unit
                trimSuffix: .yaml
            fireEvent:
              descr: Fire custom event when menu item selected
    loadTarget:
      descr: Target component to load unit when selected from menu
body: |
  {{define "actionLink"}}
  {{if .c.loadUnit}}
  {{eventHandlerWithKey .r.This "onclick" "loadUnit" .c.loadUnit}}
  {{end}}
  {{if .c.fireEvent}}
  {{eventHandlerWithKey .r.This "onclick" .c.fireEvent ""}}
  {{end}}
  {{end}}
  {{define "subMenu"}}
  {{if .c.submenu}}
  <ul>
  {{range .c.submenu}}
    <li><a {{template "actionLink" passRoot . $.r}}><label class="label">{{.name}}</label></a>
    {{template "subMenu" passRoot . $.r}}
    </li>
  {{end}}
  </ul>
  {{end}}
  {{end}}
  <div id="{{.sid}}" class="navmenu">
  </div>
  <nav class="navmenu">
  <ul>
  {{range .structure}}
    <li><a {{template "actionLink" passRoot . $}}><label class="label">{{.name}}</label></a>
    {{template "subMenu" passRoot . $}}
    </li>
  {{end}}
  </ul>
  </nav>
eventHandlers:
  loadUnit:
    action: |
      var targetPanel = Event().CurrentComp().GetProp("loadTarget");
      CompByCr(targetPanel).LoadUnitInto(Event().EventKey());
original_body: |
  {{eventHandlerWithKey $.This "onclick" "loadUnit" "x"}}
  <div id="{{.sid}}" class="navmenu">
  </div>
  <nav class="navmenu">
  <ul>
  <li>
    <a><label class="label">Menu1</label></a>
    <ul>
      <li><a><label class="label">Point1</label></a></li>
      <li><a><label class="label">Point2</label></a></li>
    </ul>
  </li>
  <li><a><label class="label">Menu2</label></a></li>
  </ul>
  </nav>
injectRootComp:
  css:
    - name: comp/navmenu.css
